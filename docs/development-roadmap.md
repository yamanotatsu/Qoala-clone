# 🛣️ 開発ロードマップ

## 概要
SESマッチングプラットフォーム「Qoala Clone」の最適化された開発順序。**技術リスク最小化**と**コア機能早期検証**を最優先とした効率的な開発計画。

---

## 🎯 最新開発戦略

### **コア機能優先アプローチ**
- **Phase 1で技術リスク検証**: Gmail連携 + AI解析を最優先実装
- **早期価値提供**: コア機能（メール自動解析→DB保存）完成
- **確実性重視**: 技術的難易度の高い部分を先に検証してから UI/UX に注力
- **段階的拡張**: 動作確認後に表示・マッチング・デプロイを順次追加

### **技術リスク優先度 (更新)**
1. **Gmail API + AI解析の統合** - 最も不確実性が高い（Phase 1で集中対応）
2. **マッチングアルゴリズム** - ビジネスロジックの複雑性（Phase 3）
3. **UI/UX・デプロイ** - 比較的確実性が高い（Phase 4-5）

---

## 📋 最新開発フェーズ

## **Phase 1: コア機能実装 - Gmail連携 + AI解析 🚀**

### **目標**
**最優先**: ユーザー登録 → Gmail指定 → SESメール自動取得 → AI解析 → DB保存の完全自動化

### **基盤構築**
```typescript
# 1. プロジェクト初期化
- Next.js 14 + TypeScript プロジェクト作成
- Prisma + PostgreSQL (Supabase/Vercel Postgres) セットアップ
- 基本的なフォルダ構成・設定ファイル
- Git設定・GitHub連携

# 2. 認証基盤
- NextAuth.js + Google OAuth設定
- Gmail API接続準備（スコープ設定）
- 基本的なUser/Emailテーブル作成
- 認証フロー実装

# 3. 最小限UI
- 基本レイアウト（ログイン画面のみ）
- Tailwind CSS + shadcn/ui 基盤
- ダッシュボードの骨組み
```

### **Gmail API連携**
```typescript
# 1. Gmail API実装
- メール取得API実装（過去30日分）
- SESメール判定ロジック実装
- フィルタリング・ページング処理
- エラーハンドリング・リトライ機能

# 2. バッチ処理システム
- Vercel Cron Jobs設定（10分間隔）
- 定期メール取得処理
- 重複チェック・データクリーニング
- API制限対応（レート制限・クォータ管理）

# 3. メールデータ管理
- Emailテーブルへの保存処理
- 処理状況管理（pending/completed/failed）
- 基本的な管理画面（メール一覧表示）
```

### **AI解析エンジン**
```typescript
# 1. AI解析基盤
- OpenAI API連携
- 2段階プロンプト実装（関連性判定→詳細抽出）
- JSON構造化処理・バリデーション
- エラーハンドリング・フォールバック

# 2. データ抽出・保存
- Project/Engineerテーブル実装
- AI解析結果の構造化保存
- 信頼度スコア管理
- 手動修正機能の基盤

# 3. 品質管理・監視
- 解析精度測定機能
- 失敗ケース分析・ログ
- プロンプト改善機能
- 処理コスト・速度監視
```

### **Phase 1 成果物**
- ✅ **完全自動化システム**: Gmail → AI解析 → DB保存
- ✅ **技術リスク検証完了**: Gmail API制限・AI解析精度・処理コスト
- ✅ **コア価値提供**: SESメールの自動構造化が動作
- ✅ **基盤完成**: 認証・DB・バッチ処理・AI連携

### **Phase 1 成功基準**
- [ ] Gmail同期が10分間隔で安定動作
- [ ] AI解析精度70%以上達成
- [ ] 処理エラー率5%以下
- [ ] API制限に引っかからない
- [ ] 1日100件以上のメール処理が可能

---

## **Phase 2: データ表示・管理機能**

### **目標**
蓄積されたデータをフロントエンドで表示・管理できるようにする

### **作業内容**
```typescript
# 1. データ一覧画面
- 案件一覧画面（テーブル形式）
- 人材一覧画面（テーブル形式）
- 検索・フィルタ機能
- ソート・ページング機能

# 2. 詳細表示・編集
- 詳細情報モーダル/ページ
- インライン編集機能
- データバリデーション
- 保存・キャンセル機能

# 3. データ品質管理
- AI信頼度表示（色分け）
- 要修正データの抽出・表示
- 一括編集機能
- データ承認・却下機能

# 4. 基本的な統計
- 処理済みメール数表示
- 案件・人材数の統計
- AI解析成功率表示
```

### **成果物**
- データ管理画面一式
- 編集・修正機能
- 品質管理ツール
- 基本統計ダッシュボード

### **成功基準**
- [ ] 全データが見やすく表示される
- [ ] 編集操作が直感的に行える
- [ ] データ整合性が保たれる
- [ ] パフォーマンスが良好

---

## **Phase 3: マッチングアルゴリズム**

### **目標**
蓄積された案件・人材データでマッチング機能を実装

### **作業内容**
```typescript
# 1. マッチングエンジン実装
- 5項目スコア計算（スキル50%、経験20%、単価15%、場所10%、時期5%）
- 重み付け・閾値設定
- バッチマッチング処理
- リアルタイムマッチング（新規データ追加時）

# 2. マッチング結果管理
- Matchテーブル実装
- スコア詳細保存
- 重複マッチング防止
- キャッシュ機能実装

# 3. 結果表示画面
- マッチング結果一覧
- スコア詳細表示（内訳付き）
- フィルタ・ソート機能
- アクション機能（お気に入り、連絡済み等）

# 4. 設定・調整機能
- 重み付け調整UI
- 閾値設定機能
- 除外ルール設定
- マッチング再実行機能
```

### **成果物**
- マッチングエンジン
- マッチング結果表示画面
- 設定・調整機能
- パフォーマンス最適化

### **成功基準**
- [ ] マッチング精度が実用レベル
- [ ] スコア計算が正確
- [ ] 処理速度が許容範囲内
- [ ] 設定変更が簡単に行える

---

## **Phase 4: UI/UX完成・統合**

### **目標**
全機能を統合し、使いやすいWebアプリケーションとして完成

### **作業内容**
```typescript
# 1. UI/UX改善
- 全画面のデザイン統一
- レスポンシブ対応（PC・タブレット）
- アニメーション・トランジション追加
- アクセシビリティ対応

# 2. 統合ダッシュボード
- 全体統計情報表示
- 処理状況リアルタイム監視
- 最新マッチング結果表示
- アクティビティログ

# 3. ユーザーエクスペリエンス向上
- オンボーディング機能
- ヘルプ・ガイド機能
- エラーメッセージ改善
- 成功体験の設計

# 4. パフォーマンス最適化
- ページロード高速化
- 画像・アセット最適化
- キャッシュ戦略実装
- SEO基本対応
```

### **成果物**
- 完成されたUI/UX
- 統合ダッシュボード
- オンボーディング・ヘルプ機能
- パフォーマンス最適化

### **成功基準**
- [ ] 直感的な操作が可能
- [ ] レスポンシブ対応完了
- [ ] ページロード3秒以内
- [ ] ユーザビリティテスト合格

---

## **Phase 5: テスト・デプロイ・運用開始**

### **目標**
品質保証と本番環境でのサービス開始

### **Week 13: テスト・品質保証**
```typescript
# 1. 自動テスト実装
- 重要機能の単体テスト
- API統合テスト
- E2Eテスト（主要フロー）
- CI/CD設定

# 2. 手動テスト
- 全機能の動作確認
- エラーケースの検証
- パフォーマンステスト
- セキュリティチェック

# 3. 本番環境準備
- 環境変数設定
- データベース最適化
- 監視・アラート設定
- バックアップ設定
```

### **Week 14: デプロイ・運用開始**
```typescript
# 1. 本番デプロイ
- Vercel本番環境設定
- カスタムドメイン設定
- SSL証明書設定
- CDN・キャッシュ設定

# 2. 運用監視開始
- ログ監視設定
- パフォーマンス監視
- エラー監視・アラート
- ユーザー行動分析

# 3. 初期運用
- 初期データ確認・調整
- ユーザー招待・フィードバック収集
- 運用マニュアル作成
- 改善計画策定
```

### **成果物**
- 本番稼働システム
- 監視・運用体制
- テストスイート
- 運用ドキュメント

### **成功基準**
- [ ] 本番環境で安定稼働
- [ ] 重要機能のテストカバレッジ80%以上
- [ ] 監視・アラート正常動作
- [ ] ユーザーフィードバック収集開始

---

## 📊 最新開発スケジュール

| フェーズ | 期間 | 主要成果物 | 技術リスク | ビジネス価値 | 重要度 |
|---------|------|-----------|-----------|-------------|--------|
| **Phase 1** | **Week 1-6** | **Gmail+AI統合** | **最高** | **高** | **🚀最優先** |
| Phase 2 | Week 7-8 | データ表示・管理 | 低 | 中 | 高 |
| Phase 3 | Week 9-10 | マッチング機能 | 中 | 最高 | 高 |
| Phase 4 | Week 11-12 | UI/UX完成 | 低 | 高 | 中 |
| Phase 5 | Week 13-14 | テスト・デプロイ | 中 | 最高 | 高 |

**総開発期間: 14週間 (約3.5ヶ月)**

---

## ⚠️ リスク対応計画 (更新)

### **Phase 1 での重要な判断ポイント**

#### **Week 4終了時点での評価**
- ✅ **Gmail API制限**: 問題なし → 継続
- ❌ **API制限問題**: バッチ間隔調整、処理最適化
- ❌ **重大な制限**: 手動データ投入機能を追加検討

#### **Phase 1完了時点での評価**
- ✅ **AI解析精度70%以上**: Phase 2へ進行
- ❌ **精度不足**: プロンプト改善、手動修正機能強化
- ❌ **コスト超過**: より安価なモデル検討、処理最適化

### **緊急時フォールバック戦略**
```typescript
// Phase 1で問題発生時の対応
const FALLBACK_STRATEGIES = {
  gmail_api_issues: "手動メールアップロード機能追加",
  ai_accuracy_low: "手動入力フォーム + AI補助機能",
  cost_overrun: "バッチ処理間隔調整 + 優先度制御",
  performance_issues: "キューイング強化 + 非同期処理"
};
```

---

## 🚀 この開発順序の最大のメリット

### **1. 早期リスク検証**
- **Phase 1で最大の技術リスクを解決**
- 問題があれば早期に方向転換可能
- UI作成前にコア機能の実現可能性を確認

### **2. 段階的価値提供**
```
Phase 1: 「メールが自動解析されてDBに保存される」← 既に価値あり
Phase 2: 「データが見やすく管理できる」← 実用性向上
Phase 3: 「マッチング機能完成」← コア価値完成
Phase 4: 「美しく使いやすいUI」← ユーザー体験向上
Phase 5: 「本番サービス開始」← 完全価値提供
```

### **3. 効率的な開発**
- 技術的難易度の高い部分を集中的に処理
- UI/UXは動作確認後に安心して時間をかけられる
- 各フェーズで明確な成果が得られるためモチベーション維持

---